#!/usr/bin/env bash

PROJECT_BLOG=demo-kwok.github.io

DIR_LLVM_WHERE=$OME_ROOT/dev
DIR_LLVM=$OME_ROOT/dev/llvm

function project-upgrade() {
    # C
    github-upgrade libuv/libuv $PROJ_ROOT/c/libuv
    github-upgrade nodejs/http-parser $PROJ_ROOT/c/http-parser
    github-upgrade json-c/json-c $PROJ_ROOT/c/json-c
    github-upgrade protobuf-c/protobuf-c $PROJ_ROOT/c/protobuf-c
    github-upgrade Snaipe/libcsptr $PROJ_ROOT/c/libcsptr

    # github-upgrade nanomsg/nanomsg $PROJ_ROOT/c/nanomsg
    # github-upgrade zeromq/libzmq $PROJ_ROOT/c/libzmq
    github-upgrade libcheck/check $PROJ_ROOT/c/libcheck
    github-upgrade lcm-proj/lcm $PROJ_ROOT/c/lcm
    svn-upgrade svn://vcs.exim.org/pcre2/code/trunk $PROJ_ROOT/c/pcre2
    github-upgrade Tencent/libco $PROJ_ROOT/libco
    
    # C++
    github-upgrade emilk/loguru $PROJ_ROOT/cpp/loguru
    github-upgrade nodejs/http2 $PROJ_ROOT/cpp/http2
    github-upgrade facebook/folly $PROJ_ROOT/cpp/folly
    github-upgrade pocoproject/poco $PROJ_ROOT/cpp/poco
    github-upgrade 01org/tbb $PROJ_ROOT/tbb
    github-upgrade Tencent/rapidjson $PROJ_ROOT/cpp/rapidjson

    github-upgrade emweb/wt $PROJ_ROOT/cpp/wt

    # Java
    github-upgrade emweb/jwt $PROJ_ROOT/java/jwt
    
    # C#

    # Lisp
    github-upgrade kanaka/mal $PROJ_ROOT/lisp/mal

    # Clojure
    github-upgrade apache/storm $PROJ_ROOT/clj/storm
    # https://github.com/apachecn/storm-doc-zh/
    github-upgrade riemann/riemann $PROJ_ROOT/clj/riemann
    github-upgrade ztellman/aleph $PROJ_ROOT/clj/aleph
    # https://github.com/ztellman/byte-streams
    # https://github.com/ztellman/lamina
    # https://github.com/ztellman/gloss
    # https://github.com/ztellman/manifold
    
    # Unity3d
    github-upgrade arcadia-unity/arcadia $PROJ_ROOT/u3d/Arcadia
    
    # UE4
    # https://github.com/EpicGames/UnrealEngine.git
    github-upgrade EpicGames/UnrealEngine $PROJ_ROOT/ue4/UnrealEngine
    
    # Data
    github-upgrade apache/thrift $PROJ_ROOT/data/thrift
    github-upgrade apache/avro $PROJ_ROOT/data/avro
    github-upgrade google/flatbuffers $PROJ_ROOT/data/flatbuffers
    
}

function book-upgrade() {
    # Book
    # https://github.com/QianMo/Real-Time-Rendering-3rd-CN-Summary-Ebook
    github-upgrade QianMo/Real-Time-Rendering-3rd-CN-Summary-Ebook $BOOK_ROOT/Real-Time-Rendering-3rd-CN-Summary-Ebook
    # https://github.com/huangz1990/real-world-haskell-cn
    github-upgrade huangz1990/real-world-haskell-cn $BOOK_ROOT/real-world-haskell-cn
}

function me-upgrade() {   	
    ome-install
    
    github-ssh-upgrade damon-kwok/workspace $HOME/workspace
    chmod +x $HOME/workspace/bin/*

    github-ssh-upgrade damon-kwok/damon-kwok.github.io $PROJ_ROOT/me/blog
    
    github-ssh-upgrade damon-kwok/awesome-package-manager $PROJ_ROOT/me/awesome-package-manager
    github-ssh-upgrade damon-kwok/awesome-network-programming $PROJ_ROOT/me/awesome-network-programming
    github-ssh-upgrade damon-kwok/awesome-web-scraping $PROJ_ROOT/me/awesome-web-scraping
    github-ssh-upgrade damon-kwok/medusa $PROJ_ROOT/me/medusa
    
    github-ssh-upgrade damon-kwok/libknife $PROJ_ROOT/me/libknife    
    # cd $PROJ_ROOT/c/libknife
    # mkdir -p build
    # cd build
    # cmake ..
    # make
}

function me-push() {
    cd $HOME/.oh-my-emacs/
    git push
    
    cd $PROJ_ROOT/me/blog
    git-push
    
    cd $HOME/workspace
    git-push

    cd $PROJ_ROOT/me/awesome-package-manager
    git-push

    cd $PROJ_ROOT/me/awesome-network-programming
    git-push

    cd $PROJ_ROOT/me/awesome-web-scraping
    git-push
    
    cd $PROJ_ROOT/me/medusa
    git-push
    
    cd $PROJ_ROOT/me/libknife
    git-push
}

function ome-push() {
    cd $HOME/.oh-my-emacs/
    git-push
}

function blog-push() {
    cd $PROJ_ROOT/me/blog
    git-push
}

function ws-push() {
    cd $HOME/workspace
    git-push
}

function daily-upgrade() {
    # tip "upgrade oh-my-emacs"
    cd ~/.oh-my-emacs/
    git pull
    
    tip "pip upgrade"
    pip install --user -U pip
    
    # erlang-upgrade
    # elixir-upgrade
    # llvm-upgrade
    # rtags-upgrade
    cquery-upgrade
    # ccls-upgrade
    mu4e-upgrade
    
    # project-upgrade
    # book-upgrade
}
