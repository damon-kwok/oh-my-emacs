#!/bin/bash

export ROOT_NAME=my-emacs-config

if [ -d ~/$ROOT_NAME ]; then
    cd ~/$ROOT_NAME
    git fetch
    cd ~
else
    git clone https://github.com/damon-kwok/my-emacs-config ~/$ROOT_NAME
fi

export bkdir=~/emacs-config-backup/`date +%Y-%m-%d@%H-%M-%S`
mkdir -p $bkdir


if [ -f ~/.emacs ]; then
   mv ~/.emacs $bkdir
fi

if [ -f ~/.emacs.d ]; then
   mv -a ~/.emacs.d $bkdir
fi

if [ -f ~/emacs-config ]; then
   mv ~/emacs-config $bkdir
fi

cp -a ~/$ROOT_NAME/emacs-config/init.el ~/.emacs 
ln -s ~/$ROOT_NAME/emacs-config ~/emacs-config


