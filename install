#!/usr/bin/env bash

if [ ! -e "$HOME/.oh-my-emacs/.git/index" ]; then
    git clone git@github.com:damon-kwok/oh-my-emacs $HOME/.oh-my-emacs --depth=1
else
    cd $HOME/.oh-my-emacs
    git pull
fi

if [ ! -e "$HOME/workspace/.git/index" ]; then
    git clone git@gitlab.com:damon-kwok/workspace $HOME/workspace --depth=1
else
    cd $HOME/workspace
    git pull
fi

chmod +x $HOME/workspace/bin/*

grep "workspace/bin/env" $HOME/.bashrc >/dev/null
if [ $? -eq 0 ]; then	
    echo "found env!"
else
    echo "" >> ~/.bashrc
    echo "# oh-my-emacs" >> ~/.bashrc
    echo "source \$HOME/workspace/bin/env" >> $HOME/.bashrc
fi

source $HOME/.bashrc
